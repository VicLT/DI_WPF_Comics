<UserControl x:Class="Lamas_Victor_ComicsWPF.Views.ComicsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Lamas_Victor_ComicsWPF.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Lamas_Victor_ComicsWPF.Views"
             xmlns:i="clr-namespace:Microsoft.Xaml.Behaviors;assembly=Microsoft.Xaml.Behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="450"
             d:DesignWidth="800">

    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="1.1*"/>
            <RowDefinition Height="10*"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="1.5*" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0"
                   Grid.Column="1"
                   Text="LISTADO"
                   FontSize="18"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"/>

        <TextBlock Grid.Row="0"
                   Grid.Column="3"
                   Text="DETALLES"
                   FontSize="18"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"/>

        <TextBox x:Name="txtBuscar"
                 Grid.Row="1"
                 Grid.Column="0"
                 Grid.ColumnSpan="3"
                 Margin="0,0,10,0"
                 Padding="2"
                 Height="25"
                 VerticalAlignment="Center"
                 TextAlignment="Center"
                 Text="{Binding Busqueda, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                 Foreground="Gray"
                 GotFocus="txtBuscar_GotFocus"
                 LostFocus="txtBuscar_LostFocus"
                 HorizontalAlignment="Stretch"/>

        <DataGrid x:Name="DataGridComics"
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding ComicsFiltrados}"
                  CanUserAddRows="False"
                  SelectedItem="{Binding SelectedComic}"
                  Grid.Row="2"
                  Grid.ColumnSpan="3"
                  Margin="0,10,10,0">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <i:InvokeCommandAction Command="{Binding SelectedItemChangedCommand}"  
                                           CommandParameter="{
                                                Binding ElementName=DataGridComics,
                                                Path=SelectedItem
                                           }"
                    />
                </i:EventTrigger>
            </i:Interaction.Triggers>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Cómic ID"
                                    Binding="{Binding Path=ComicId}"
                                    Visibility="Hidden"/>
                <DataGridTextColumn Header="Cómic"
                                    Binding="{Binding Path=Nombre}"
                                    Width="1*"
                                    IsReadOnly="True"/>
                <DataGridTextColumn Header="Autor ID"
                                    Binding="{Binding Path=Autor.AutorId}"
                                    Visibility="Hidden"/>
                <DataGridTextColumn Header="Autor"
                                    Binding="{Binding Path=Autor.NombreCompleto}"
                                    Width="*"
                                    IsReadOnly="True"/>
                <DataGridTextColumn Header="Editorial"
                                    Binding="{Binding Path=Editorial.Nombre}"
                                    Width="*"
                                    IsReadOnly="True"/>
                <DataGridTextColumn Header="Precio Venta"
                                    Binding="{Binding Path=PrecioVenta}"
                                    Width="0.7*"
                                    IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <Border Grid.Row="1" 
                Grid.RowSpan="3" 
                Grid.Column="3"
                BorderBrush="Blue"
                BorderThickness="2"
                CornerRadius="5">
            <Border Grid.Row="1" 
                    Grid.RowSpan="3" 
                    Grid.Column="3"
                    BorderBrush="Blue"
                    BorderThickness="2"
                    CornerRadius="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Border Grid.Row="0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="0.4*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Row="0"
                                       Grid.Column="0"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Text="NOMBRE"/>

                            <TextBox Grid.Row="0"
                                     Grid.Column="1"
                                     Text="{Binding NombreComic}"
                                     Height="25"
                                     Margin="5,0,20,0"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     Width="200"/>

                            <TextBlock Grid.Row="1"
                                       Grid.Column="0"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Text="AUTOR"/>

                            <TextBox Grid.Row="1"
                                     Grid.Column="1"
                                     Text="{Binding NombreAutor}"
                                     Height="25"
                                     Margin="5,0,20,0"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     Width="200"/>

                            <TextBlock Grid.Row="2"
                                       Grid.Column="0"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Text="EDITORIAL"/>

                            <TextBox Grid.Row="2"
                                     Grid.Column="1"
                                     Text="{Binding NombreEditorial}"
                                     Height="25"
                                     Margin="5,0,20,0"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     Width="200"/>

                            <TextBlock Grid.Row="3"
                                       Grid.Column="0"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Text="PRECIO VENTA"/>

                            <TextBox Grid.Row="3"
                                     Grid.Column="1"
                                     Text="{Binding PrecioVenta}"
                                     Height="25"
                                     Margin="5,0,20,0"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     MinWidth="100"
                                     MaxWidth="100"/>

                            <TextBlock Grid.Row="4"
                                       Grid.Column="0"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Text="PRECIO COMPRA"/>

                            <TextBox Grid.Row="4"
                                     Grid.Column="1"
                                     Text="{Binding PrecioCompra}"
                                     Height="25"
                                     Margin="5,0,20,0"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     MinWidth="100"
                                     MaxWidth="100"/>

                            <TextBlock Grid.Row="5"
                                       Grid.Column="0"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Text="STOCK TIENDA"/>

                            <TextBox Grid.Row="5"
                                     Grid.Column="1"
                                     Text="{Binding StockLocal}"
                                     Height="25"
                                     Margin="5,0,20,0"
                                     VerticalAlignment="Center"
                                     HorizontalAlignment="Left"
                                     MinWidth="50"
                                     MaxWidth="50"/>

                            <TextBlock Grid.Row="6"
                                       Grid.Column="0"
                                       Grid.ColumnSpan="2"
                                       Text="STOCK RESTO TIENDAS"
                                       FontWeight="Bold"
                                       Margin="0,0,0,3"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       Foreground="Red"/>
                            <ListView Grid.Row="7"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="2"
                                      Margin="3"
                                      Padding="5"
                                      ItemsSource="{Binding StockRestoLocales}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Local ID " />
                                            <TextBlock Text="{Binding LocalId}"
                                                       FontWeight="Bold"/>
                                            <TextBlock Text=" --> " />
                                            <TextBlock Text="{Binding Cantidad}"
                                                       Foreground="Red"
                                                       FontWeight="Bold"/>
                                            <TextBlock Text=" ud/s" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
        </Border>

        <Button Grid.Row="3"
                Grid.Column="0"
                Command="{Binding ShowComicsNuevoViewCommand}"
                CommandParameter="NUEVO"
                Content="NUEVO"
                Width="100"
                Height="30"
                HorizontalAlignment="Right"/>

        <Button Grid.Row="3"
                Grid.Column="1"
                Command="{Binding ShowComicsEditarViewCommand}"
                CommandParameter="EDITAR"
                Content="EDITAR"
                Width="100"
                Height="30"/>

        <Button Grid.Row="3"
                Grid.Column="2"
                Command="{Binding ShowComicsEliminarViewCommand}"
                CommandParameter="ELIMINAR"
                Content="ELIMINAR"
                Width="100"
                Height="30"
                HorizontalAlignment="Left"/>
    </Grid>
</UserControl>
